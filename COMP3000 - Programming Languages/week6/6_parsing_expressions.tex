\documentclass[twoside=false, DIV=14]{scrartcl}

\input{../latex_setup.tex}
\title{\color{redish} \vspace{-1em}COMP3000 Week 6: Parsing Expression}

\begin{document}
{\color{blackish}\maketitle}\vspace{-7em}

\begin{abstract}
\end{abstract}

\section*{Topics}
\begin{enumerate}
\item
\item
\item
\end{enumerate}

\section*{Preparation}
\begin{itemize}
\item Read the text chapters X
\item Watch lectures, X
\item Complete the RAT individually and bring your answers to class.
\end{itemize}

\section*{Definitions to help while preparing}
\begin{description}
\item[a]: aa
\end{description}

\newpage
\part*{RAT X \hspace{6em} {\small ANSWER ON iLearn}}
%\renewcommand{\labelenumii}{\alph{enumii}) $\fbox{$\phantom{x}$}$}
\renewcommand{\labelenumii}{\alph{enumii}) $\square$}
\begin{enumerate}
\item \textbf{question}
\begin{enumerate}
  \item answer \tick
  \item distractor
  \item distractor
  \item distractor
  \item distractor
\end{enumerate}

\end{enumerate}

\newpage
\part*{Application Exercise}
I proposed the following grammar for expressing river flows:
\begin{lstlisting}
  flow      -> [(flow ",")*] + additional  
            | headwater 
            | flow @ rate
            | "(" flow ")";
  headwater  -> STRING;
  rate       -> STRING;
  additional -> STRING;
\end{lstlisting}

This week your group will write a parser for this grammar in the style of the Lox parser.  This is a big undertaking, so I suggest you break up the work as follows:
\begin{itemize}
\item One person who has a good working Lox implementation will copy that to a new directory and work on their computer to modify it to work on the new grammar.
\item Another person will plan out the changes needed to the Meta programming.  They will later work with the first person to make sure the implementation is all working well.
\item The remaining group members explore the parsing steps and the expected final parse tree for each of the following examples:
\begin{itemize}
  \item \lstinline|[2300, 1200, 9200,] + 800|
  \item \lstinline|([3200, 5100 @ 50 + 800, 1050,] + 2900) @ 90|
  \item three more examples you make up yourselves.
\end{itemize}  
These notes will help guide the first two in knowing if they are generating the right parse tree with their implementation so either put them on a whiteboard or make them very neat for sharing.
\end{itemize}

\newpage
\part*{Application Exercise Notes and Solutions}

\newpage
\part*{Self Study Exercises}
\section*{exercise}
flobadob

\subsection*{Solution}
dibdob

\newpage
\part*{Assignment One}
At this point you have everything you need to submit assignment one.

\section{Task}
Your task is to provide \emph{a grammar description for modelling water flows}, \emph{a working parser for that grammar} and \emph{examples of programs in that language}.

\subsection{A Grammar Description}
Using the format given by Nystrom and demonstrated above, provide a text file (\lstinline|grammar.txt|) containing a grammar to describe water flows in rivers.  The grammar should support the following features:
\begin{enumerate}
\item A river is either a headwater or the confluence of two other rivers
\item The flow in a river is affected by that day's rainfall.
\item The last 10 days of rainfall are considered in each program.
\item Any line in the program beginning with \lstinline|//| is considered a comment and not executed.
\end{enumerate}

You have been working on exactly this task in your workshops and your group's solutions can inform your submission \emph{but} this submission is \emph{your own work building on that group work and the discussions in class}.  This is an individual submission.  You will be graded individually.  The work that you carry over from your group and class should be acknowledged in a file (\lstinline|acknowledgements.txt|).  As long as the contributions of your group and your class discussions are acknowledged, there is no penalty for drawing on other work.

\subsubsection{Use of online resources and GenAI}
You may use any resources you can find, including GenAI.  However, all contributions from external sources must also be described in your \lstinline|acknowledgements.txt|. This includes any solicitations for help.  I.e. if you post on a forum for help, you must include a link to your post and the replies.  If you prompt a GenAI, you must include your prompt and its response.

\subsection{A working parser}
You will submit a working parser for the grammar in your grammar.txt file.  The parser must compile and run with the following commands:
\begin{description}
\item[compile] \lstinline|javac assign1/*.java| on JDK version 17.
\item[run] \lstinline|java -cp assign1 assign1.Main <filename>| of JRE version 17 where \lstinline|<filename>| is the relative path to a program that conforms to your grammar.
\end{description}

Your compiled program must work on the three example files you have provided.  Your marker will also test it on other files that match your grammar.

\subsection{Example Programs}
You should provide three example programs in the files:
\begin{itemize}
\item \lstinline+examples/one.mdba+ (tested with \lstinline|java -cp assign1 assign1.Main examples/one.mdba|)
\item \lstinline+examples/two.mdba+ (tested with \lstinline|java -cp assign1 assign1.Main examples/two.mdba|)
\item \lstinline+examples/three.mdba+ (tested with \lstinline|java -cp assign1 assign1.Main examples/three.mdba|)
\end{itemize}

Your example files should use the comments to explain the type of river flow that is being modelled in that program.

\section{Rubric}
Your submission will be graded according to the following Rubric

\begin{tabular}{|p{0.15\linewidth}|p{0.2\linewidth}|p{0.25\linewidth}|p{0.30\linewidth}|}
  \hline
  \textbf{part} & \textbf{fail} & \textbf{pass} & \textbf{distinction} \\ \hline
  submission & missing files & all files present but some errors & instructions followed correctly \\ \hline
  grammar & is not a valid grammar & is a valid grammer but not sufficiently expressive & correct and expressive enough to describe the required features \\ \hline
  parser & fails to run on example files & fails to run on other valid files & runs correctly on example files and marker's files \\ \hline
  example programs & incorrect or incoherent & describes three different flow scenarios & describes three different and interesting flow scenarios \\ \hline
  acknowl-edgements & none & some & all \\ \hline
\end{tabular}
\end{document}